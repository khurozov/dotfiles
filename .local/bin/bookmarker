#!/bin/sh

ifinstalled fuzzel wtype

file="$HOME/.local/share/bookmarks"

type_bm() {
    list="$(grep -v '^#' "$file" 2>/dev/null)" 

    if [ -z "$list" ]; then
        notify-send "No bookmarks" "Check $file"
        exit 1
    fi

    bookmark="$(grep -v -E '^#|^\s*$' "$file" | fuzzel -d -w 100)" || exit 2

    wtype "${bookmark%% *}" -k Return
}

edit_bm() {
    xdg-open "$file"
}

case "$1" in
    type)   type_bm;;
    edit)   edit_bm;;
esac
