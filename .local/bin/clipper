#!/bin/sh

ifinstalled cliphist wl-copy

select_id() {
    cliphist list | fuzzel -d -R -w 80 -p "${1:-Select}" | cut -f1
}

copy_item() {
    id="$(select_id 'Copy: ')"
    
    [ -z "$id" ] && exit

    cliphist decode "$id" | wl-copy
}

delete_items() {
    id="$(select_id 'Delete: ')"

    [ -z "$id" ] && exit

    printf "%d" "$id" | cliphist delete

    delete_items # delete other elements until exited
}


case "$1" in
    copy)   copy_item;;
    delete) delete_items;;
esac
